package com.ly.neuter.core.utils;import android.content.Context;import com.ly.neuter.core.R;/** * 版本工具 * * @author Xuqn */public class VersionUtil {    private static float DEFAULT_VERSION = 1.4F;    /**     * 获取版本号     *     * @param mContext     * @return     */    public static float getVersion(Context mContext) {        try {            String version = mContext.getPackageManager().getPackageInfo(mContext.getPackageName(), 0).versionName;            if (version == null || version.length() <= 0) {                return DEFAULT_VERSION;            }            return Float.valueOf(version);        } catch (Exception e) {            return DEFAULT_VERSION;        }    }    /**     * 获取版本号字符串     *     * @param context     * @return     */    public static String getVersionStr(Context context) {        try {            String version = context.getPackageManager().getPackageInfo(context.getPackageName(), 0).versionName;            if (version == null || version.length() <= 0) {                return String.valueOf(DEFAULT_VERSION);            }            return version;        } catch (Exception e) {            return String.valueOf(DEFAULT_VERSION);        }    }    /**     * 版本判断     *     * @param versionPath     * @return     */    public static boolean judgeVersion(Context context, String versionPath) {        // 1.4,http://192.168.128.225:8080/Energy/phoneInterface/downloadAPK.htm?type=1        String info[] = versionPath.split(",");        String version = info[0];//1.4        String path = info[1];//http://192.168.128.225:8080/Energy/phoneInterface/downloadAPK.htm?type=1//        if (version != null && path.matches("^[-+]?(([0-9]+)([.]([0-9]+))?|([.]([0-9]+))?)$")) {        if (version != null && path != null) {            //符合版本信息规则            float v = Float.valueOf(version);            if (v > VersionUtil.getVersion(context)) {                //提示版本更新对话框                DialogBuilderUtils.initUpdateDialog(context, path);                return true;            } else {                //更新版本号不大于当前版本号                ToastUtil.showShortToast(context, context.getResources().getString(R.string.version_no_update_available));                return false;            }        }        return false;    }}